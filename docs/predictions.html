<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Predictions - Tabular View</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Courier New', monospace; background: #0a0e27; color: #fff; padding: 20px; }
        .warning-banner { background: #dc2626; color: #fff; padding: 15px; text-align: center; font-size: 1.3em; font-weight: bold; margin-bottom: 20px; }
        h1 { text-align: center; color: #667eea; margin-bottom: 20px; }
        .table-container { overflow-x: auto; background: #1a1f3a; padding: 20px; border-radius: 10px; }
        table { width: 100%; border-collapse: collapse; font-size: 0.9em; }
        th { background: #252b45; padding: 12px 8px; text-align: left; position: sticky; top: 0; border: 1px solid #3a4060; }
        td { padding: 10px 8px; border: 1px solid #3a4060; }
        .date-cell { font-weight: bold; color: #667eea; }
        .long { color: #10b981; font-weight: bold; }
        .short { color: #ef4444; font-weight: bold; }
        .hold { color: #a0a0a0; }
        .positive-return { color: #10b981; }
        .negative-return { color: #ef4444; }
        .pending { color: #666; font-style: italic; }
        .actual-return { background: #252b45; font-weight: bold; }
        tr:hover { background: #252b45; }
        .strategy-header { font-size: 0.85em; }
        .pick-return { display: flex; flex-direction: column; gap: 2px; }
        .pick { font-size: 0.9em; }
        .return { font-size: 0.85em; opacity: 0.8; }
        .timeframe { font-size: 0.75em; color: #888; }
        .summary-row { background: #2a3050; font-weight: bold; }
        .nav-buttons { text-align: center; margin: 20px 0; }
        .nav-buttons a { background: #667eea; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; margin: 0 10px; }
        .nav-buttons a:hover { background: #764ba2; }
    </style>
</head>
<body>
    <div class="warning-banner">
        ‚ö†Ô∏è THIS IS NOT FINANCIAL ADVICE ‚ö†Ô∏è
    </div>
    
    <h1>üìä Stock Predictions - Daily Tracker</h1>
    
    <div class="nav-buttons">
        <a href="index.html">Dashboard</a>
        <a href="predictions.html">Predictions Table</a>
        <a href="performance.html">Performance</a>
    </div>
    
    <div class="table-container">
        <table id="predictionsTable">
            <thead>
                <tr>
                    <th rowspan="2">Date</th>
                    <th colspan="2" class="strategy-header">Momentum</th>
                    <th colspan="2" class="strategy-header">Mean Reversion</th>
                    <th colspan="2" class="strategy-header">Volume Breakout</th>
                    <th colspan="2" class="strategy-header">Technical</th>
                    <th colspan="2" class="strategy-header">Pattern</th>
                    <th colspan="2" class="strategy-header">Volatility</th>
                    <th colspan="2" class="strategy-header">MA Cross</th>
                    <th colspan="2" class="strategy-header">Support/Resist</th>
                    <th colspan="2" class="strategy-header">Sentiment</th>
                    <th colspan="2" class="strategy-header">Ensemble</th>
                </tr>
                <tr>
                    <th>Pick</th><th>Return</th>
                    <th>Pick</th><th>Return</th>
                    <th>Pick</th><th>Return</th>
                    <th>Pick</th><th>Return</th>
                    <th>Pick</th><th>Return</th>
                    <th>Pick</th><th>Return</th>
                    <th>Pick</th><th>Return</th>
                    <th>Pick</th><th>Return</th>
                    <th>Pick</th><th>Return</th>
                    <th>Pick</th><th>Return</th>
                </tr>
            </thead>
            <tbody id="tableBody">
                <!-- Data will be inserted here -->
            </tbody>
        </table>
    </div>

    <script>
        // Load predictions from JSON file
        async function loadPredictionsData() {
            try {
                const response = await fetch('predictions_data.json');
                const data = await response.json();
                return data.predictions || [];
            } catch (error) {
                console.error('Error loading predictions:', error);
                return getSampleData();
            }
        }
        
        // Sample data for when JSON is not available
        function getSampleData() {
            return [
            {
                date: '2025-01-13',
                predictions: {
                    momentum: { stock: 'AAPL', position: 'LONG', projected: '+4.5%', timeframe: '1W', actual: 'pending' },
                    meanReversion: { stock: 'MSFT', position: 'SHORT', projected: '-3.2%', timeframe: '1W', actual: 'pending' },
                    volumeBreakout: { stock: 'NVDA', position: 'LONG', projected: '+5.8%', timeframe: '1W', actual: 'pending' },
                    technical: { stock: 'GOOGL', position: 'LONG', projected: '+3.7%', timeframe: '1W', actual: 'pending' },
                    pattern: { stock: 'AMZN', position: 'HOLD', projected: '0%', timeframe: '-', actual: 'pending' },
                    volatility: { stock: 'TSLA', position: 'SHORT', projected: '-6.2%', timeframe: '1W', actual: 'pending' },
                    maCross: { stock: 'META', position: 'LONG', projected: '+4.1%', timeframe: '1W', actual: 'pending' },
                    supportResist: { stock: 'JPM', position: 'LONG', projected: '+2.9%', timeframe: '1W', actual: 'pending' },
                    sentiment: { stock: 'JNJ', position: 'HOLD', projected: '0%', timeframe: '-', actual: 'pending' },
                    ensemble: { stock: 'AAPL', position: 'LONG', projected: '+4.2%', timeframe: '1W', actual: 'pending' }
                }
            },
            {
                date: '2025-01-10',
                predictions: {
                    momentum: { stock: 'MSFT', position: 'LONG', projected: '+2.1%', timeframe: '5D', actual: '+1.8%' },
                    meanReversion: { stock: 'AAPL', position: 'LONG', projected: '+1.5%', timeframe: '3D', actual: '+2.2%' },
                    volumeBreakout: { stock: 'TSLA', position: 'SHORT', projected: '-2.8%', timeframe: '1D', actual: '-3.1%' },
                    technical: { stock: 'NVDA', position: 'LONG', projected: '+2.7%', timeframe: '5D', actual: '+3.5%' },
                    pattern: { stock: 'GOOGL', position: 'LONG', projected: '+1.2%', timeframe: '3D', actual: '+0.8%' },
                    volatility: { stock: 'META', position: 'LONG', projected: '+2.0%', timeframe: '2D', actual: '+1.5%' },
                    maCross: { stock: 'AMZN', position: 'SHORT', projected: '-1.3%', timeframe: '5D', actual: '-0.9%' },
                    supportResist: { stock: 'BRK-B', position: 'HOLD', projected: '0%', timeframe: '-', actual: '+0.3%' },
                    sentiment: { stock: 'JPM', position: 'LONG', projected: '+1.8%', timeframe: '3D', actual: '+2.1%' },
                    ensemble: { stock: 'NVDA', position: 'LONG', projected: '+2.5%', timeframe: '3D', actual: '+2.9%' }
                }
            }
            ];
        }

        function formatPick(prediction) {
            const posClass = prediction.position.toLowerCase();
            return `
                <td>
                    <span class="${posClass}">${prediction.stock} ${prediction.position}</span>
                    <div class="timeframe">${prediction.timeframe}</div>
                </td>
            `;
        }

        function formatReturn(prediction) {
            if (prediction.actual === 'pending') {
                return `<td><span class="pending">${prediction.projected}</span></td>`;
            } else {
                const actualClass = prediction.actual.startsWith('+') ? 'positive-return' : 'negative-return';
                return `<td class="actual-return">
                    <span class="${actualClass}">${prediction.actual}</span>
                    <div style="font-size: 0.75em; opacity: 0.6;">proj: ${prediction.projected}</div>
                </td>`;
            }
        }

        async function loadPredictions() {
            const tbody = document.getElementById('tableBody');
            const predictionsData = await loadPredictionsData();
            
            tbody.innerHTML = predictionsData.map(day => {
                const p = day.predictions;
                return `
                    <tr>
                        <td class="date-cell">${day.date}</td>
                        ${formatPick(p.momentum)}${formatReturn(p.momentum)}
                        ${formatPick(p.meanReversion)}${formatReturn(p.meanReversion)}
                        ${formatPick(p.volumeBreakout)}${formatReturn(p.volumeBreakout)}
                        ${formatPick(p.technical)}${formatReturn(p.technical)}
                        ${formatPick(p.pattern)}${formatReturn(p.pattern)}
                        ${formatPick(p.volatility)}${formatReturn(p.volatility)}
                        ${formatPick(p.maCross)}${formatReturn(p.maCross)}
                        ${formatPick(p.supportResist)}${formatReturn(p.supportResist)}
                        ${formatPick(p.sentiment)}${formatReturn(p.sentiment)}
                        ${formatPick(p.ensemble)}${formatReturn(p.ensemble)}
                    </tr>
                `;
            }).join('');
            
            // Add summary row
            tbody.innerHTML += `
                <tr class="summary-row">
                    <td>Win Rate</td>
                    <td colspan="2">62%</td>
                    <td colspan="2">58%</td>
                    <td colspan="2">55%</td>
                    <td colspan="2">61%</td>
                    <td colspan="2">53%</td>
                    <td colspan="2">59%</td>
                    <td colspan="2">57%</td>
                    <td colspan="2">54%</td>
                    <td colspan="2">56%</td>
                    <td colspan="2">64%</td>
                </tr>
            `;
        }

        // Load on page load
        loadPredictions();
    </script>
</body>
</html>